<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>AIã‚¤ãƒ©ã‚¹ãƒˆç”¨ ã‚·ãƒãƒ“ãƒ«ãƒ€ãƒ¼ğŸ•Šï¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* --- ãƒ™ãƒ¼ã‚¹ãƒ‡ã‚¶ã‚¤ãƒ³ --- */
    :root {
      --primary-color: #4a90e2; /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ï¼ˆé’ï¼‰ */
      --accent-gradient: linear-gradient(135deg, #4a90e2 0%, #8e44ad 100%);
      --bg-color: #f4f6f9;      /* å…¨ä½“ã®èƒŒæ™¯è‰² */
      --card-bg: #ffffff;       /* ã‚«ãƒ¼ãƒ‰ã®èƒŒæ™¯è‰² */
      --text-color: #333;
      --border-radius: 8px;
    }

    body { 
      font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif; 
      margin: 0; 
      padding: 0 0 300px 0; /* ãƒ•ãƒƒã‚¿ãƒ¼åˆ†ã®ä½™ç™½ */
      background: var(--bg-color); 
      color: var(--text-color);
    }

    /* --- ãƒ˜ãƒƒãƒ€ãƒ¼ --- */
    header {
      background: #fff;
      padding: 20px 0;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      margin-bottom: 15px;
      border-bottom: 1px solid #eaeaea;
    }

    h1 { 
      font-size: 1.8em; 
      margin: 0; 
      font-weight: 800;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      color: #333;
    }

    .title-text {
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .title-icon {
      font-size: 1.2em;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }

    .subtitle {
      font-size: 0.75em; color: #888; margin-top: 5px; letter-spacing: 0.1em; font-weight: bold; text-transform: uppercase;
    }

    .container { max-width: 1000px; margin: 0 auto; padding: 0 10px; }

    /* --- ãƒ­ã‚°ã‚¨ãƒªã‚¢ --- */
    #log-wrapper { 
      margin-bottom: 12px; 
      background: var(--card-bg);
      padding: 8px 12px;
      border-radius: var(--border-radius);
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      border: 1px solid #e0e0e0;
    }
    .log-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
    .meter { display: inline-block; margin-right: 8px; font-size: 0.8em; padding: 3px 10px; border-radius: 12px; font-weight: bold; }
    .success { background: #d4edda; color: #155724; }
    .fail { background: #f8d7da; color: #721c24; }
    
    #log { 
      white-space: pre-wrap; font-family: Consolas, monospace; font-size: 0.85em; 
      background: #2d2d2d; color: #e0e0e0; padding: 8px; 
      border-radius: 4px; max-height: 100px; overflow-y: auto; 
      border: 1px solid #444;
    }

    /* --- ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆå¤§æ ï¼‰ --- */
    .section { 
      background: var(--card-bg);
      margin-bottom: 12px; 
      border-radius: var(--border-radius);
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      border: 1px solid #e0e0e0;
      overflow: hidden;
    }

    /* â˜… å¤§è¦‹å‡ºã—ã®ãƒ‡ã‚¶ã‚¤ãƒ³ (ã“ã“ã‚’å¼·èª¿) */
    /* builder_core.v1.js ã§ä»˜ä¸ã•ã‚Œã‚‹ .section-summary ã‚¯ãƒ©ã‚¹ */
    summary.section-summary {
      background: #f8f9fa; /* è–„ã„ã‚°ãƒ¬ãƒ¼ */
      padding: 14px 18px;
      font-size: 1.2em;    /* æ–‡å­—å¤§ãã */
      font-weight: bold;
      color: #2c3e50;      /* æ¿ƒã„è‰² */
      cursor: pointer;
      list-style: none;
      border-bottom: 1px solid transparent;
      transition: background 0.2s;
      border-left: 5px solid var(--primary-color); /* å·¦ã«é’ã„ãƒ©ã‚¤ãƒ³ã§å¼·èª¿ */
      display: flex;
      align-items: center;
    }
    summary.section-summary:hover { background: #eef2f6; }
    
    details[open] > summary.section-summary {
      background: #e6f0ff; /* é–‹ã„ãŸã¨ãã¯è–„ã„é’ */
      border-bottom: 1px solid #e0e0e0;
      color: #0056b3;
    }
    /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ä¸‰è§’ãƒãƒ¼ã‚«ãƒ¼ã‚’æ¶ˆã™ */
    summary::-webkit-details-marker { display: none; }


    /* --- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ --- */
    .section-content {
      padding: 12px; 
    }

    /* â˜… å°è¦‹å‡ºã—ï¼ˆã‚«ãƒ†ã‚´ãƒªï¼‰ã®ãƒ‡ã‚¶ã‚¤ãƒ³ (ã“ã“ã‚’æ§ãˆã‚ã«) */
    .section-content details {
      margin-bottom: 6px;
      border: 1px solid #eee;
      border-radius: 6px;
      background: #fff;
    }
    .section-content details[open] {
      background: #fff;
      border-color: #d0d7de;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05); /* é–‹ã„ãŸæ™‚ã«å°‘ã—æµ®ã‹ã™ */
    }

    .section-content summary {
      font-size: 0.95em; /* å¤§è¦‹å‡ºã—ã‚ˆã‚Šå°ã•ã */
      padding: 8px 12px;
      cursor: pointer;
      color: #555;
      background: #fafafa;
      border-radius: 6px;
      font-weight: 600;
      transition: 0.2s;
      display: flex;
      align-items: center;
      list-style: none; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ã‚«ãƒ¼å‰Šé™¤ */
    }
    .section-content summary:hover { background: #f0f0f0; }

    /* å°è¦‹å‡ºã—ç”¨ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ (CSSã§ç”Ÿæˆ) */
    .section-content summary::before {
      content: "â–¶";
      font-size: 0.7em;
      color: #999;
      margin-right: 8px;
      transition: transform 0.2s;
      display: inline-block;
    }
    /* é–‹ã„ãŸæ™‚ã«ã‚¢ã‚¤ã‚³ãƒ³ã‚’å›è»¢ */
    .section-content details[open] > summary::before {
      transform: rotate(90deg);
      color: var(--primary-color);
    }
    
    .section-content details[open] > summary {
      background: #fff;
      color: #333;
      border-bottom: 1px solid #eee;
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
    }
    /* å°è¦‹å‡ºã—ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ã‚«ãƒ¼ã‚’æ¶ˆã™ */
    .section-content summary::-webkit-details-marker { display: none; }


    /* --- ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ --- */
    .section-content details[open] > div,
    .expression-v2-complete details[open] > div, 
    .pose-v2-latest details[open] > div,
    .attire-v1-ultimate-revised details[open] > div,
    .quality-preset-v1-ultimate details[open] > div,
    .lighting-v1 details[open] > div,
    .effect-v1 details[open] > div {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 6px;
      padding: 10px;
    }

    /* å€‹åˆ¥ã‚¿ã‚°ï¼ˆãƒ©ãƒ™ãƒ«ï¼‰ */
    #sections label {
      display: flex;
      align-items: center;
      padding: 6px 8px;
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 0.9em;
      cursor: pointer;
      transition: all 0.15s;
      line-height: 1.3;
      min-height: 32px;
    }

    #sections label:hover {
      border-color: var(--primary-color);
      background: #f0f8ff;
      box-shadow: 0 2px 5px rgba(74, 144, 226, 0.15);
      transform: translateY(-1px);
    }

    /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ */
    #sections input[type="checkbox"] {
      accent-color: var(--primary-color);
      transform: scale(1.2);
      margin-right: 8px;
      flex-shrink: 0;
    }

    /* ãƒã‚§ãƒƒã‚¯ã•ã‚ŒãŸçŠ¶æ…‹ */
    #sections label:has(input:checked) {
      background: #e7f3ff;
      border-color: var(--primary-color);
      font-weight: bold;
      color: #0056b3;
      box-shadow: inset 0 0 0 1px var(--primary-color);
    }

    /* --- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ --- */
    #preview-area {
      border-radius: var(--border-radius);
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      margin-bottom: 10px;
      border: 1px solid #ddd;
    }

    /* --- å›ºå®šãƒ•ãƒƒã‚¿ãƒ¼ --- */
    #mini-ui-fixed {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(8px);
      border-top: 1px solid #ccc;
      padding: 12px 16px 20px 16px;
      box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.08);
      z-index: 9999;
      box-sizing: border-box;
    }
    #actions { 
      display: flex; 
      gap: 10px; 
      margin-bottom: 10px; 
      max-width: 1000px;
      margin-left: auto;
      margin-right: auto;
    }
    
    button { 
      flex: 1; 
      padding: 10px; 
      font-size: 1em; 
      border: none; 
      border-radius: 6px; 
      cursor: pointer; 
      font-weight: bold; 
      transition: 0.2s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    button:active { transform: translateY(1px); box-shadow: none; }

    #genBtn { background: linear-gradient(135deg, #4a90e2, #357abd); color: white; }
    #genBtn:hover { opacity: 0.9; }
    
    #copyBtn { background: #6c757d; color: white; }
    #copyBtn:hover { background: #5a6268; }
    
    #translateBtn { background: #ff9800; color: white; }
    #translateBtn:hover { background: #e68a00; }

    #resetBtn { background: #dc3545; color: white; }
    #resetBtn:hover { background: #c82333; }

    .reload-btn {
      padding: 4px 10px;
      font-size: 0.85em;
      margin-left: 8px;
      background: #fff;
      color: #333;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .reload-btn:hover { background: #f0f0f0; }

    textarea#out {
      width: 100%;
      height: 60px;
      padding: 10px;
      font-family: Consolas, monospace;
      font-size: 0.95em;
      border: 1px solid #ccc;
      border-radius: 6px;
      resize: none;
      background: #fff;
      box-sizing: border-box;
      max-width: 1000px;
      display: block;
      margin: 0 auto;
    }
    textarea#out:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
    }
  
/* --- Log fullscreen toggle --- */
#log-wrapper.fullscreen{
  position: fixed !important;
  inset: 0 !important;
  z-index: 99999 !important;
  background: #fff !important;
  padding: 10px !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}
#log-wrapper.fullscreen #log{
  height: calc(100vh - 80px) !important;
  max-height: none !important;
}
body.log-fullscreen{
  overflow: hidden !important;
}
</style>
</head>
<body>

  <header>
    <h1>
      <span class="title-text">AIã‚¤ãƒ©ã‚¹ãƒˆç”¨ ã‚·ãƒãƒ“ãƒ«ãƒ€ãƒ¼</span>
      <span class="title-icon">ğŸ•Šï¸</span>
    </h1>
    <div class="subtitle">Ultimate Prompt Generation Tool</div>
  </header>

  <div class="container">
    <div id="log-wrapper">
      <div class="log-header">
        <div>
          <span class="meter success">æˆåŠŸ <span id="success-count">0</span></span>
          <span class="meter fail">å¤±æ•— <span id="fail-count">0</span></span>
        </div>
        <div style="font-size: 0.85em;">
          <label><input type="checkbox" id="auto-scroll" checked> ãƒ­ã‚°è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«</label>
          <button type="button" id="log-expand" class="reload-btn">æ‹¡å¤§</button><button type="button" id="log-shrink" class="reload-btn" style="display:none;">ç¸®å°</button><button onclick="location.reload()" class="reload-btn">å†èª­è¾¼</button>
        </div>
      </div>
      <div id="log" aria-hidden="true">Initializing...</div>
    </div>

    <div id="sections">
      <div id="list-quality_preset" class="section"></div>
      <div id="list-expression" class="section"></div>
      <div id="list-pose" class="section"></div>
      <div id="list-hair" class="section"></div>
      <div id="list-attire" class="section"></div>
      <div id="list-background" class="section"></div>
      <div id="list-filter" class="section"></div>
      <div id="list-effect" class="section"></div>
      <div id="list-cinematic" class="section"></div>
      <div id="list-lighting" class="section"></div>
      <div id="list-faith" class="section"></div>
      <div id="list-presets" class="section"></div>

      <div id="list-preview_sync" class="section"></div>
      <div id="list-visualsync" class="section"></div>
    </div>
  </div>

  <div id="mini-ui-fixed">
    <div id="actions">
      <button id="genBtn" type="button">ç”Ÿæˆ (Generate)</button>
      <button id="translateBtn" type="button">æ—¥æœ¬èªè¡¨ç¤º</button> <button id="copyBtn" type="button" onclick="copyTagOutput()">ã‚³ãƒ”ãƒ¼</button>
      <button id="resetBtn" type="button">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    <textarea id="out" placeholder="ã“ã“ã«ç”Ÿæˆã•ã‚ŒãŸã‚¿ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™..."></textarea>
  </div>

  <script src="ext_manifest_loader.v1.js" data-ext></script>

  <script>
    function copyTagOutput() {
      const outText = document.getElementById('out').value;
      if(!outText) return;
      navigator.clipboard.writeText(outText).then(() => {
        const btn = document.getElementById('copyBtn');
        const originalText = btn.textContent;
        btn.textContent = "ã‚³ãƒ”ãƒ¼å®Œäº†!";
        setTimeout(() => btn.textContent = originalText, 1500);
      }).catch(err => { console.error("Copy failed", err); });
    }

    function generateTags() {
      // ã‚³ã‚¢å´ã®ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ãŒå„ªå…ˆã•ã‚Œã¾ã™
    }
    
    function resetTags() { } 
  </script>

<script>
(function(){
  const wrap = () => document.getElementById('log-wrapper');
  const btnExpand = () => document.getElementById('log-expand');
  const btnShrink = () => document.getElementById('log-shrink');
  function setFull(on){
    const w = wrap(); if(!w) return;
    if(on){
      w.classList.add('fullscreen');
      document.body.classList.add('log-fullscreen');
      if(btnExpand()) btnExpand().style.display='none';
      if(btnShrink()) btnShrink().style.display='';
      // keep scroll at bottom if auto-scroll is on
      const as = document.getElementById('auto-scroll');
      if(as && as.checked) w.querySelector('#log')?.scrollTo(0, 1e9);
    }else{
      w.classList.remove('fullscreen');
      document.body.classList.remove('log-fullscreen');
      if(btnExpand()) btnExpand().style.display='';
      if(btnShrink()) btnShrink().style.display='none';
    }
  }
  document.addEventListener('click', (e)=>{
    if(e.target && e.target.id==='log-expand'){ e.preventDefault(); setFull(true); }
    if(e.target && e.target.id==='log-shrink'){ e.preventDefault(); setFull(false); }
  });
  // ESC to shrink
  document.addEventListener('keydown',(e)=>{ if(e.key==='Escape'){ setFull(false); } });
})();
</script>

</body>
</html>

